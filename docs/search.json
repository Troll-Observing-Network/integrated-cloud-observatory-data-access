[
  {
    "objectID": "tutorials/tutorial_tone_ico_data_access.html",
    "href": "tutorials/tutorial_tone_ico_data_access.html",
    "title": "Accessing data from the Troll Observing Network (TONe) Integrated Cloud Observatory (ICO)",
    "section": "",
    "text": "However, this is not essential.\n\n\nfrom dask.distributed import Client\nclient = Client(processes=False)\nclient\n\n\nimport icechunk\nimport pandas as pd\nimport xarray as xr\nimport hvplot.xarray"
  },
  {
    "objectID": "tutorials/tutorial_tone_ico_data_access.html#use-a-dask-cluster-for-higher-performance-when-reading-data",
    "href": "tutorials/tutorial_tone_ico_data_access.html#use-a-dask-cluster-for-higher-performance-when-reading-data",
    "title": "Accessing data from the Troll Observing Network (TONe) Integrated Cloud Observatory (ICO)",
    "section": "",
    "text": "However, this is not essential.\n\n\nfrom dask.distributed import Client\nclient = Client(processes=False)\nclient\n\n\nimport icechunk\nimport pandas as pd\nimport xarray as xr\nimport hvplot.xarray"
  },
  {
    "objectID": "tutorials/tutorial_tone_ico_data_access.html#define-a-function-that-access-the-level-0-data-repositories",
    "href": "tutorials/tutorial_tone_ico_data_access.html#define-a-function-that-access-the-level-0-data-repositories",
    "title": "Accessing data from the Troll Observing Network (TONe) Integrated Cloud Observatory (ICO)",
    "section": "Define a function that access the Level-0 data repositories",
    "text": "Define a function that access the Level-0 data repositories\n\ndef read_level0_data_repo(repo_L0_bucket):\n\n    repo_prefix = ''\n    repo_endpoint_url = 'https://tone-ico-gws-o.s3-ext.jc.rl.ac.uk/'\n    repo_region = 'auto'\n    repo_anonymous = True\n\n    storage = icechunk.s3_storage(\n        bucket=repo_L0_bucket,\n        prefix=repo_prefix,\n        endpoint_url=repo_endpoint_url,\n        region=repo_region,\n        anonymous=repo_anonymous,\n    )\n    repo = icechunk.Repository.open(storage)\n    session = repo.readonly_session(branch='main')\n    if 'radiosonde' in repo_L0_bucket:\n        # ....Radiosonde data are stored as an xarray DataTree\n        dt = xr.open_datatree(session.store, engine='zarr', consolidated=True)\n        return dt\n    else:\n        # ....All other TONe-ICO data are stored as xarray DataSets\n        ds = xr.open_zarr(session.store, consolidated=False)\n        return ds\n\n\nCurrent list of TONe-ICO Level-0 data repos\n\nrepo = [\n    'automatic-weather-station-troll-station.level0.repo',\n    'automatic-weather-station-troll-airfield.level0.repo',\n    'depolarisation-lidar-ceilometer.level0.repo',\n    'radiosonde.level0.repo',\n]\n\n\n\nRead automatic weather station data!\n\naws_station = read_level0_data_repo(repo[0])\naws_airfield = read_level0_data_repo(repo[1])\n\n\naws_station.T_air_2_vent.hvplot() * aws_airfield.T_air_2.hvplot()"
  },
  {
    "objectID": "tutorials/tutorial_tone_ico_data_access.html#read-the-lidar-data",
    "href": "tutorials/tutorial_tone_ico_data_access.html#read-the-lidar-data",
    "title": "Accessing data from the Troll Observing Network (TONe) Integrated Cloud Observatory (ICO)",
    "section": "Read the Lidar data",
    "text": "Read the Lidar data\n\nlidar = read_level0_data_repo(repo[2])\nlidar\n\n\n# ....Place the lowest cloud base height into your local computer's memory\n#     This speeds up the plotting below !\ncbh = lidar.cloud_base_heights[:,0].compute()\n\n\n# ....Plot a time series of the lowest cloud base height\ncbh.hvplot.scatter()\n\n\n# ....Create a violin plot that displays the statistics as a function of height of the lowest cloud base height\ncbh.hvplot.violin()"
  },
  {
    "objectID": "tutorials/tutorial_tone_ico_data_access.html#read-the-sonde-profiles",
    "href": "tutorials/tutorial_tone_ico_data_access.html#read-the-sonde-profiles",
    "title": "Accessing data from the Troll Observing Network (TONe) Integrated Cloud Observatory (ICO)",
    "section": "Read the sonde profiles",
    "text": "Read the sonde profiles\n\nUnfortunately, this takes about 2 minutes, so be PATIENT.\n\n\nsonde_profiles = read_level0_data_repo(repo[3])\n\n\n# %% - One accesses each level-0 radiosonde profiles like a Python dictionary.\n#      Print a list of the profiles, the keys of which are the names of the raw radiosonde *.cor files.\n\nsonde = sonde_profiles.groups\nprint(sonde[1])\n\n\nsonde_profiles[sonde[1]].T.hvplot(y='height')"
  },
  {
    "objectID": "tutorials/tutorial_tone_ico_data_access.html#dont-forget-to-close-the-client-to-the-dask-cluster",
    "href": "tutorials/tutorial_tone_ico_data_access.html#dont-forget-to-close-the-client-to-the-dask-cluster",
    "title": "Accessing data from the Troll Observing Network (TONe) Integrated Cloud Observatory (ICO)",
    "section": "Don’t forget to close the client to the Dask cluster!",
    "text": "Don’t forget to close the client to the Dask cluster!\n\nclient.close()"
  },
  {
    "objectID": "index.html",
    "href": "index.html",
    "title": "Access to TONe ICO data repos",
    "section": "",
    "text": "This repo contains a tutorial notebook and the definition of a Python virtual environment (.python-verions, pyproject.toml, uv.lock) for accessing data repos from the Troll Observing Network’s Integrated Cloud Observatory."
  },
  {
    "objectID": "index.html#create-a-reproducible-python-virtual-environment-on-your-local-computer",
    "href": "index.html#create-a-reproducible-python-virtual-environment-on-your-local-computer",
    "title": "Access to TONe ICO data repos",
    "section": "1) Create a reproducible Python virtual environment on your local computer",
    "text": "1) Create a reproducible Python virtual environment on your local computer\n\nInstall the uv package manager\nThe command below can be executed from anywhere on your local computer (laptop, desktop, workstation, …), because the shell script will install the executable in the appropriate place and put the location on your path.\n# For Linux and Mac\ncurl -LsSf https://astral.sh/uv/install.sh | sh\n\n# Test the installation; you should see a list of available uv commands\nuv \n\n\nBuild the Python virtual environment\nThe commands below need to be executed from the base directory of the repo; integrated-cloud-observatory-data-access/\n# Deactivate any current virtual environments\ndeactivate\n\n# Build .venv using uv\nuv sync\n\n\nUse the virtual environment in IPython or Jupyter Lab\nThe commands below start either an IPython shell or Jupyter Lab with the installed Python virtual environment\n\nIPython\n\nuv run ipython\n\nJupyter Lab\n\nuv run jupyter-lab\n\n\nSet the Python Interpreter in VSCode\nIf you’re using VSCode, open the Command Pallette (e.g., command-shift-P on a Mac), then type Python: Select Interpreter. Choose .venv/bin/python to select the virtual environment associate with this code repository."
  },
  {
    "objectID": "index.html#start-the-tutorial",
    "href": "index.html#start-the-tutorial",
    "title": "Access to TONe ICO data repos",
    "section": "2) Start the tutorial",
    "text": "2) Start the tutorial\n\nOpen the tutorial notebook in VSCode\n\nor\n\nType uv run tutorial_tone_ico_data_access.ipynb"
  }
]